(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{255:function(t,e,h){"use strict";h.r(e);var n=h(139),o=h(140),c=(h(189),h(47),h(15),h(30),{touchstart:1,touchmove:1,touchend:1}),r={mousedown:1,mousemove:1,mouseup:1},l=function(t,e,h){t.addEventListener(e,h,!1)},d=function(t,e,h){t.removeEventListener(e,h,!1)},w=function(){function t(e){var h=e.el;Object(n.a)(this,t),this._hasTouch="ontouchstart"in window,this.$el=h,this.init(),this.touch={start:null,end:null},this.state={swiping:!1,global:!1},this.queue={swiping:[],swiped:[],"swipe-left":[],"swipe-right":[],"swipe-up":[],"swipe-down":[]}}return Object(o.a)(t,[{key:"init",value:function(){this._hasTouch?(l(this.$el,"touchstart",this.touchStart.bind(this)),l(window,"touchmove",this.touchMove.bind(this)),l(window,"touchend",this.touchEnd.bind(this)),l(window,"touchcancel",this.touchCancel.bind(this))):(l(this.$el,"mousedown",this.touchStart.bind(this)),l(window,"mousemove",this.touchMove.bind(this)),l(window,"mouseup",this.touchEnd.bind(this)))}},{key:"destroy",value:function(){this.$el&&(d(this.$el,"touchstart",this.touchStart.bind(this)),d(this.$el,"mousedown",this.touchStart.bind(this))),d(window,"touchmove",this.touchMove.bind(this)),d(window,"touchend",this.touchEnd.bind(this)),d(window,"touchcancel",this.touchCancel.bind(this)),d(window,"mousemove",this.touchMove.bind(this)),d(window,"mouseup",this.touchEnd.bind(this)),this.queue={swiping:[],swiped:[],"swipe-left":[],"swipe-right":[],"swipe-up":[],"swipe-down":[]}}},{key:"setGlobal",value:function(){this.state.global=!0}},{key:"cancelGlobal",value:function(){this.state.global=!1}},{key:"listen",value:function(t,e,h){var rect;if(e){var n=e.getBoundingClientRect();rect={x:n.left,y:n.top,width:n.width,height:n.height}}else rect=null;var o=9999*Math.random()+t;this.queue[t].push({$el:e,token:o,func:h,rect:rect})}},{key:"leave",value:function(t,e){if(!this.queue[t])return!1;for(var i=0,h=this.queue[t].length;i<h;i++)if(this.queue[t].token===e)return this.queue[t].splice(i-1,1),!0;return!1}},{key:"update",value:function(){for(var t,e=0,h=Object.keys(this.queue);e<h.length;e++){var n=h[e];this.queue[n].forEach((function(e){e.$el&&(t=e.$el.getBoundingClientRect(),e.rect={x:t.left,y:t.top,width:t.width,height:t.height})}))}}},{key:"clear",value:function(){for(var t=0,e=Object.keys(this.queue);t<e.length;t++){var h=e[t];this.queue[h].length=0}}},{key:"notice",value:function(t,rect){for(var e={},h=!0,n=null,i=0,o=this.queue[t].length;i<o;i++)(e=this.queue[t][i].rect)?this.rectIn(rect,e)&&!this.state.global&&(this.queue[t][i].func(this.touch.start,this.touch.end),h=!1):n=this.queue[t][i].func;h&&n&&n(this.touch.start,this.touch.end)}},{key:"rectIn",value:function(small,t){return small.x>t.x&&small.x+small.width<t.x+t.width&&small.y>t.y&&small.y+small.height<t.y+t.height}},{key:"getRect",value:function(t,e){var rect={};return t.x<e.x?(rect.x=t.x,rect.width=e.x-t.x):(rect.x=e.x,rect.width=t.x-e.x),t.y<e.y?(rect.y=t.y,rect.height=e.y-t.y):(rect.y=e.y,rect.height=t.y-e.y),rect}},{key:"getPosition",value:function(t){if(c[t.type]){for(var e=[],h=t.touches.length,i=0;i<h;i++)e.push({x:t.touches[i].pageX,y:t.touches[i].pageY});return e}if(r[t.type])return[{x:t.pageX,y:t.pageY}]}},{key:"getDistance",value:function(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}},{key:"getAngle",value:function(t,e){return 180*Math.atan2(e.y-t.y,e.x-t.x)/Math.PI}},{key:"touchStart",value:function(t){this.state.swiping=!0,this.touch.start=this.getPosition(t)[0]}},{key:"touchMove",value:function(t){this.touch.start&&(this.touch.end=this.getPosition(t)[0],this.notice("swiping",this.getRect(this.touch.end,this.touch.start)))}},{key:"touchEnd",value:function(t){if(this.touch.start){"mouseup"===t.type&&(this.touch.end=this.getPosition(t)[0]);var e=this.getAngle(this.touch.end,this.touch.start);e>-45&&e<45&&this.notice("swipe-left",this.getRect(this.touch.end,this.touch.start)),(e<-135||e>135)&&this.notice("swipe-right",this.getRect(this.touch.end,this.touch.start)),e>45&&e<135&&this.notice("swipe-up",this.getRect(this.touch.end,this.touch.start)),e<-45&&e>-135&&this.notice("swipe-down",this.getRect(this.touch.end,this.touch.start)),this.notice("swiped",this.getRect(this.touch.end,this.touch.start)),this.state.swiping=!1,this.touch.start=null}}},{key:"touchCancel",value:function(t){t.preventDefault(),console.log(t)}}]),t}();e.default=w}}]);